@page "/changePassword"
@inject IRepository repository
@inject NavigationManager navigationManager
@inject ToastService toastService




@code {


    [CascadingParameter]
    public MainLayout? Layout { get; set; }

    protected override void OnInitialized()
    {
        Layout!.Title = "Cambiar contraseña";
        Layout!.Breadcrumbs = new List<string>() { "Inicio", "Páginas", "Perfil", "Cambiar contraseña" };
    }

    private ChangePasswordDTO changePasswordDTO = new();

    private async Task ChangePasswordAsync()
    {
        var responseHttp = await repository.PostAsync("/api/accounts/changePassword", changePasswordDTO);
        if (responseHttp.Error)
        {
            var message = await responseHttp.GetErrorMessageAsync();
            toastService.Notify(new(ToastType.Danger, message!));
            return;
        }

        toastService.Notify(new(ToastType.Success, "Contraseña cambiada con éxito."));
        navigationManager.NavigateTo("/profile");
    }

}
